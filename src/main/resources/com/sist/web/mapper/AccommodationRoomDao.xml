<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sist.manager.dao.AccommodationRoomDao">

  <!-- ResultMap: Java 모델 필드와 DB 컬럼 매핑 -->
  <resultMap id="accomRoomResultMap" type="com.sist.manager.model.AccommodationRoom">
    <id     column="ACCOMM_ROOM_ID"              property="accommRoomId"/>
    <result column="ACCOMM_ID"                   property="accommId"/>
    <result column="ACCOMM_ROOM_NAME"            property="roomName"/>
    <result column="ACCOMM_ROOM_SCALE"           property="roomScale"/>
    <result column="ACCOMM_ROOM_COUNT"           property="roomCount"/>
    <result column="ACCOMM_ROOM_STANDARD_PERSON" property="standardPerson"/>
    <result column="ACCOMM_ROOM_BATHROOM"        property="bathroom"/>
    <result column="ACCOMM_ROOM_BATH"            property="bath"/>
    <result column="ACCOMM_ROOM_TV"              property="tv"/>
    <result column="ACCOMM_ROOM_PC"              property="pc"/>
    <result column="ACCOMM_ROOM_INTERNET"        property="internet"/>
    <result column="ACCOMM_ROOM_REFRIGERATOR"    property="refrigerator"/>
    <result column="ACCOMM_ROOM_SOFA"            property="sofa"/>
    <result column="ACCOMM_ROOM_TABLE"           property="table"/>
    <result column="ACCOMM_ROOM_DRYER"           property="dryer"/>
    <result column="ACCOMM_ROOM_CHECKIN"         property="checkIn"/>
    <result column="ACCOMM_ROOM_CHECKOUT"        property="checkOut"/>
    <result column="ACCOMM_ROOM_STANDARD_PRICE"  property="standardPrice"/>
  </resultMap>

  <!-- 숙소 ID 목록 조회 -->
  <select id="getAllAccomIds" resultType="string">
    SELECT ACCOMM_ID FROM T_ACCOMM
  </select>

  <!-- 객실 정보 INSERT -->
  <insert id="insertAccommodationRoom" parameterType="com.sist.manager.model.AccommodationRoom">
    INSERT INTO T_ACCOMM_ROOM (
      ACCOMM_ROOM_ID, ACCOMM_ID, ACCOMM_ROOM_NAME, ACCOMM_ROOM_SCALE, ACCOMM_ROOM_COUNT,
      ACCOMM_ROOM_STANDARD_PERSON, ACCOMM_ROOM_BATHROOM, ACCOMM_ROOM_BATH, ACCOMM_ROOM_TV,
      ACCOMM_ROOM_PC, ACCOMM_ROOM_INTERNET, ACCOMM_ROOM_REFRIGERATOR, ACCOMM_ROOM_SOFA,
      ACCOMM_ROOM_TABLE, ACCOMM_ROOM_DRYER, ACCOMM_ROOM_CHECKIN, ACCOMM_ROOM_CHECKOUT,
      ACCOMM_ROOM_STANDARD_PRICE
    ) VALUES (
      #{accommRoomId}, #{accommId}, #{roomName}, #{roomScale}, #{roomCount},
      #{standardPerson}, #{bathroom}, #{bath}, #{tv},
      #{pc}, #{internet}, #{refrigerator}, #{sofa},
      #{table}, #{dryer}, #{checkIn}, #{checkOut},
      #{standardPrice}
    )
  </insert>

  <!-- 저장된 객실 전체 조회 -->
  <select id="getAllAccommodationRooms" resultMap="accomRoomResultMap">
    SELECT * FROM T_ACCOMM_ROOM
  </select>
  
    <select id="getAllAccommIds" resultType="string">
	  SELECT ACCOMM_ID FROM T_ACCOMM
	</select>

  <!-- 단일 객실 존재 여부 확인 -->
  <select id="existsAccommodationRoom" parameterType="String" resultType="int">
    SELECT COUNT(*) FROM T_ACCOMM_ROOM WHERE ACCOMM_ROOM_ID = #{accommRoomId}
  </select>

  <!-- 시퀀스 nextval 조회 -->
  <select id="getNextAccommRoomSeq" resultType="long">
    SELECT ACCOMM_ROOM_SEQ.NEXTVAL FROM dual
  </select>

</mapper>
